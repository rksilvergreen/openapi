# Test: Discriminator with allOf containing nested composition keywords (should fail validation)
openapi: 3.0.0
info:
  title: Invalid Discriminator with Nested Composition Test
  version: 1.0.0
paths: {}
components:
  schemas:
    # Invalid: Discriminator with allOf containing nested oneOf blocks
    InvalidAllOfWithDiscriminator:
      allOf:
        - type: object
          required: [petType]
          properties:
            petType:
              type: string
        - oneOf:
            - $ref: "#/components/schemas/Cat"
            - $ref: "#/components/schemas/Dog"
        - oneOf:
            - $ref: "#/components/schemas/Train"
            - $ref: "#/components/schemas/Boat"
      discriminator:
        propertyName: petType  # Ambiguous - represents Cat/Dog or Train/Boat?
    
    Cat:
      type: object
      required: [petType, meow]
      properties:
        petType:
          type: string
        meow:
          type: boolean
    
    Dog:
      type: object
      required: [petType, bark]
      properties:
        petType:
          type: string
        bark:
          type: boolean
    
    Train:
      type: object
      required: [petType, smoke]
      properties:
        petType:
          type: string
        smoke:
          type: boolean
    
    Boat:
      type: object
      required: [petType, water]
      properties:
        petType:
          type: string
        water:
          type: boolean

    Test:
      title: "1"
      type: string
      oneOf:
        - title: "2"
          type: object
        - title: "3"
          type: string

    Test2:
      allOf:
        - oneOf:
          - title: "1"
            type: object
          - title: "2"
            type: string
        - oneOf:
          - title: "3"
            type: object
          - title: "4"
            type: string

    Test3:
      allOf:
        - title: "1"
          type: object
        - title: "2"
          type: string
        - oneOf:
          - allOf:
            - title: "3"
              type: object
            - title: "4"
              type: string
          - oneOf:
            - title: "5"
              type: object
            - title: "6"
              type: string

    Test4:
      allOf:
        - oneOf:
          - title: "1"
            type: object
          - allOf: 
            - title: "2"
              type: object
            - title: "3"
              type: integer
            - oneOf:
              - title: "4"
                type: object
              - title: "5"
                type: string
        - oneOf:
          - title: "6"
            type: object
          - title: "7"
            type: string

    Test5:
      allOf:
        - type: object
          properties:
            name: 
              type: string
            age:
              type: integer
          additionalProperties:
              type: string
        - type: object
          properties:
            address:
              type: string
            city:
              type: string
          additionalProperties: false
    
    Test6:
      allOf:
        - type: object
          properties:
            name:
              type: string
        - type: object
          properties:
            name:
              type: integer

    Test7:
      allOf:
        - type: array
          items:
            type: string
        - type: array
          items:
            type: integer

    Example1:
      allOf:
        - type: integer
          minimum: 10
        - type: integer
          minimum: 20

